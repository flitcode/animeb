<html lang="en">
<head>
<title>AnimeB - watch anime</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
	
	<script type="text/javascript">
$(document).ready(myfunc1);

	var number = 0;

function myfunc(){
	document.getElementById("btn1").style.visibility = "hidden";
	document.getElementById("btn2").style.visibility = "visible";

	var v = window.location.hash.substring(1);
	
    $.ajax({
        url: "https://cors-anime.herokuapp.com/https://animeflix.io/api/episodes?anime_id=" + v + "&limit=30&sort=DESC",
        dataType: 'json',
		
		headers: {
        'Content-Type': 'application/x-www-form-urlencoded'
    },
        type: 'get',
		
        cache:false,
		beforeSend: function() {
		document.getElementById("loader").style.visibility = "visible";
			
		},
		complete: function(){
			document.getElementById("loader").style.visibility = "hidden";
			
		},
        success: function(data){
            /*console.log(data);*/
            var event_data = '';
			
			var url = window.location.href.split('#')[0];
			
			var title;
			var a = "";
			document.getElementById("animename").append(data.anime.title + " Episodes");
			
            $.each(data.data, function(index, value){
                /*console.log(value);*/
				title = value.title;
				if(title==null)
				{
				title = "No value given";
				}
				else if(title.length>30){
					a="...";
				}
				else {
					a="";
				}
                event_data += '<tr>';
                event_data += '<td maxlength="10"> <a href="' + url.replace('/anime.html','/episode.html#') + value.id +  '">  '+title.substring(0, 30) + a+'</td>';
                event_data += '<td>'+ "Ep: " + value.episode_num+'</td>';
				//event_data += '<td><img src="' + value.thumbnail + '" width="250px"  class="img-fluid" alt="Responsive image"/></td>';
				event_data += '<td>'+  value.airing_date +'</td>';
                event_data += '</tr>';
            });
            $("#list_table_json").append(event_data);
        },
        error: function(xhr, d){
            console.log("error");
           // alert("404. Please wait until the File is Loaded.");
        }
    });
	}
	
	function myfunc1(){
	number++;
	var v = window.location.hash.substring(1);
	
	
    $.ajax({
        url: "https://cors-anime.herokuapp.com/https://animeflix.io/api/episodes?anime_id=" + v + "&limit=30&sort=DESC&page=" + number,
        dataType: 'json',
		
		headers: {
        'Content-Type': 'application/x-www-form-urlencoded'
    },
        type: 'get',
		
        cache:false,
		beforeSend: function() {
		document.getElementById("loader").style.visibility = "visible";
			
		},
		complete: function(){
			document.getElementById("loader").style.visibility = "hidden";
			
		},
        success: function(data){
            /*console.log(data);*/
            var event_data = '';
			
			var url = window.location.href.split('#')[0];
			
			var title;
			var a = "";
			
			document.getElementById("animename").innerHTML = data.anime.title + " Episodes";
            $.each(data.data, function(index, value){
                /*console.log(value);*/
				title = value.title;
				if(title == null){
				title="No value given";
				}
				else if(title.length>30){
					a="...";
				}
				else {
					a="";
				}
                event_data += '<tr>';
                event_data += '<td maxlength="10"> <a href="' + url.replace('/anime.html','/episode.html#') + value.id +  '">  '+title.substring(0, 30) + a+'</td>';
                event_data += '<td>'+ "Ep: " + value.episode_num+'</td>';
				//event_data += '<td><img src="' + value.thumbnail + '" width="250px"  class="img-fluid" alt="Responsive image"/></td>';
				event_data += '<td>'+  value.airing_date +'</td>';
                event_data += '</tr>';
            });
            $("#list_table_json").append(event_data);
        },
        error: function(xhr, d){
            console.log("error");
           // alert("404. Please wait until the File is Loaded.");
        }
    });
	}
</script>
</head>

<body style="background-color: #343A40;" >
<div style="text-align: center; background-color:#007BFF;">
    <div style="text-align: center;" class="btn-group" >
	<a class="btn btn-primary" href="https://flitcode.github.io/animeb/home.html" role="button">Home</a> 
	<a class="btn btn-primary" href="https://flitcode.github.io/animeb/popular.html" role="button">Popular</a> 
	<a class="btn btn-primary" href="https://flitcode.github.io/animeb/search.html" role="button">Search</a> 
	</div>
</div>
	
	
	<h2 style="color: white;" id="animename"> </h2>
	<table  id="list_table_json" border="1" class="table table-dark">
    <thead>
        <tr>
            <th>Name</th>
            <th>Episode</th>			
			<th>Date</th>
        </tr>                   
    </thead>
</table>
	<div id="loader" style="text-align: center; visibility: hidden;">
		<img src="https://thumbs.gfycat.com/IlliterateGoldenDugong-size_restricted.gif" width="50px"/>
	</div>
	<div style="text-align: center;">
	<button id="btn2" type="button" onclick="myfunc1()" class="btn btn-primary" style="text-align: center;">Load More</button>
	</div>
   
    
</body>
</html>